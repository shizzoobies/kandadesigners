---
import BaseLayout from "@/layouts/BaseLayout.astro";
import PersonCard from "@/components/PersonCard.astro";
import { getCollection } from "astro:content";

const people = (await getCollection("people"))
  .filter((p) => p.data.featured)
  .sort((a, b) => a.data.name.localeCompare(b.data.name));

const projects = (await getCollection("projects"))
  .filter((p) => p.data.featured)
  .sort((a, b) => +b.data.date - +a.data.date)
  .slice(0, 6);

// Branding (we'll gradually update this across the site as we touch files)
const STUDIO_NAME = "K & A Designers";
const STUDIO_SHORT = "K & A";
---
<BaseLayout
  title={`${STUDIO_NAME} — Alex Anderson + Kristina Anderson`}
  description={`${STUDIO_NAME} is a two-person studio and portfolio hub for Alex Anderson and Kristina Anderson. Learning design, web design, and AI audio.`}
>
  <!-- HERO -->
  <section class="hero">
    <div class="kicker reveal">
      <span aria-hidden="true">●</span>
      <span>{STUDIO_SHORT} • Two-person studio</span>
    </div>

    <div class="reveal" style="max-width: 62rem;">
      <h1 class="h1" style="letter-spacing:-0.02em;">
        Modern learning, web, and audio design built with clarity.
      </h1>

      <p class="lede" style="max-width: 44rem;">
        {STUDIO_NAME} is a shared home for two portfolios.
        We create practical, polished work that looks great and stays easy to maintain.
      </p>

      <div class="ctaRow" style="margin-top: 1.15rem;">
        <a class="btn primary" href="/portfolio">View portfolio</a>
        <a class="btn" href="/team">Meet Alex + Kristina</a>
        <a class="btn" href="/contact">Hire us</a>
      </div>
    </div>

    <!-- Studio split selector -->
    <div class="split reveal" style="margin-top: 2.25rem;">
      {people.map((p) => (
        <PersonCard
          name={p.data.name}
          slug={p.slug}
          role={p.data.role}
          summary={p.body.slice(0, 140) + (p.body.length > 140 ? "…" : "")}
          skills={p.data.skills}
          image={p.data.image}
        />
      ))}
    </div>

    <!-- Small studio note -->
    <div class="reveal" style="margin-top: 1.25rem;">
      <div
        class="card"
        style="
          padding: .95rem 1rem;
          border-radius: 18px;
          display:flex;
          justify-content:space-between;
          align-items:center;
          gap: 1rem;
          flex-wrap: wrap;
        "
      >
        <div class="muted" style="line-height:1.3;">
          Looking for a quick overview? Start with the portfolio highlights, or choose a designer above.
        </div>
        <a class="btn" href="/portfolio" style="white-space:nowrap;">Browse highlights</a>
      </div>
    </div>
  </section>

  <!-- FEATURED WORK -->
  <section class="section">
    <div class="reveal" style="display:flex; justify-content:space-between; gap:1.25rem; align-items:flex-end; flex-wrap:wrap;">
      <div>
        <h2 style="margin-bottom:.25rem;">Featured work</h2>
        <p class="muted" style="margin:0; max-width: 44rem;">
          A few standout projects across both portfolios. Built fast, clean, and designed to last.
        </p>
      </div>

      <a class="btn" href="/portfolio" style="white-space:nowrap;">See all work</a>
    </div>

    <div class="grid" style="margin-top: 1.25rem;">
      {projects.map((p, i) => (
        <a
          class="card cardPad reveal"
          href={`/portfolio/${p.slug}`}
          style={`
            grid-column: span ${i === 0 ? 7 : i === 1 ? 5 : 4};
            min-height: ${i < 2 ? "220px" : "auto"};
            display:flex;
            flex-direction:column;
            justify-content:space-between;
          `}
        >
          <div>
            <div style="display:flex; justify-content:space-between; gap:.8rem; align-items:flex-start;">
              <div style="font-weight:800; letter-spacing:-0.01em; line-height:1.2;">
                {p.data.title}
              </div>
              <span class="tag" style="white-space:nowrap;">{p.data.person}</span>
            </div>

            <div class="muted" style="margin:.65rem 0 .9rem; line-height:1.45;">
              {p.data.description}
            </div>
          </div>

          <div class="tagRow" style="margin-top:.25rem;">
            {p.data.tags.slice(0, i < 2 ? 6 : 4).map((t) => <span class="tag">{t}</span>)}
          </div>
        </a>
      ))}

      {projects.length === 0 && (
        <div class="card cardPad reveal" style="grid-column: span 12;">
          <div style="font-weight:800; margin-bottom:.35rem;">No featured projects yet</div>
          <div class="muted">
            Set <code>featured: true</code> on a project to show it here.
          </div>
        </div>
      )}
    </div>
  </section>

  <!-- WHAT WE DO -->
  <section class="section">
    <div class="reveal">
      <h2 style="margin-bottom:.25rem;">What we do</h2>
      <p class="muted" style="margin:0; max-width: 46rem;">
        A focused studio menu. Clear deliverables, clean design, and fast turnaround.
      </p>
    </div>

    <div class="grid" style="margin-top: 1.25rem;">
      <div class="card cardPad reveal" style="grid-column: span 12;">
        <div class="grid">
          <div style="grid-column: span 4;">
            <div style="font-weight:800; margin-bottom:.25rem;">Instructional design</div>
            <div class="muted">Storyboards, modules, microlearning, and clean learning flows.</div>
          </div>
          <div style="grid-column: span 4;">
            <div style="font-weight:800; margin-bottom:.25rem;">Web design</div>
            <div class="muted">Fast sites, UX writing, content structure, and polished UI.</div>
          </div>
          <div style="grid-column: span 4;">
            <div style="font-weight:800; margin-bottom:.25rem;">AI audio</div>
            <div class="muted">Narration prototypes, demo reels, and onboarding voice samples.</div>
          </div>
        </div>
      </div>

      <div class="card cardPad reveal" style="grid-column: span 12;">
        <div class="grid" style="align-items:center;">
          <div style="grid-column: span 8;">
            <div style="font-weight:800; margin-bottom:.25rem;">Let’s build something clean and memorable.</div>
            <div class="muted">Tell us what you need. We’ll reply with next steps and a timeline.</div>
          </div>
          <div style="grid-column: span 4; display:flex; justify-content:flex-end;">
            <a class="btn primary" href="/contact">Contact us</a>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
